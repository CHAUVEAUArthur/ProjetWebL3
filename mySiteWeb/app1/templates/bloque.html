<!DOCTYPE html>
<html>
<head>
    <title>Vous êtes temporairement bloqué</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script>
        function startCountdown(minutes, seconds) {
            var countdownElement = document.getElementById('countdown');
            var endTime = new Date(new Date().getTime() + minutes * 60000 + seconds * 1000);

            function updateCountdown() {
                var now = new Date();
                var timeRemaining = endTime - now;

                if (timeRemaining <= 0) {
                    countdownElement.innerHTML = "Vous allez être redirigé vers la page de connexion.";
                    clearInterval(interval);
                    setTimeout(function() {
                        window.location.href = "{% url 'connexion' %}";
                    }, 3000);  // Redirige après 3 secondes
                } else {
                    var minutes = Math.floor(timeRemaining / 60000);
                    var seconds = Math.floor((timeRemaining % 60000) / 1000);
                    countdownElement.innerHTML = "Veuillez réessayer dans " + seconds + " secondes.";
                }
            }

            updateCountdown();
            var interval = setInterval(updateCountdown, 1000);
        }
    </script>
</head>
<body onload="startCountdown({{ minutes }}, {{ seconds }})">
    <main class="container">
        <h1 class="mt-5">Vous êtes temporairement bloqué</h1>
        <noscript>
            <div class="alert alert-danger">JavaScript est désactivé dans votre navigateur. Veuillez l'activer pour voir le compte à rebours.</div>
        </noscript>
        <p id="countdown" class="mt-3">Chargement du compte à rebours...</p>
    </main>

    <footer class="bg-dark text-white text-center py-3 mt-5">
        <p class="mb-0">© 2024 Bibliothèque Universitaire. Tous droits réservés.</p>
    </footer>

    <!-- Script Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>